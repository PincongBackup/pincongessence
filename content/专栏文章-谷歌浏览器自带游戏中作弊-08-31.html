
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <h1>专栏文章: 谷歌浏览器自带游戏中作弊<br></h1><address>Python<br></address><p>(想看更好的排版可去我<a href="https://pymongo.github.io/#/doc/project/chrome-game-cheat" target="_blank">博客</a>上看)</p><figure><img src="https://telegra.ph/file/bd7e6f96dea957ef25ab9.png"><figcaption></figcaption></figure><p>没网时，谷歌浏览器(以下简称为chrome)会出现一个恐龙奔跑游戏</p><p>或打开 chrome://dino/ 进入游戏</p><p>操作很简单，跳跃或下蹲避开障碍物，按Alt可以暂停</p><p>那么如何在这个小游戏中作弊呢？</p><h4 id="审查网页">审查网页</h4><p>这个游戏的动画引擎是canvas</p><figure><img src="https://telegra.ph/file/c6852aaff23626a7bed73.png"><figcaption></figcaption></figure><p>由于网页游戏(除了flash)的逻辑是用js实现，</p><p>那我就在键盘事件中设置一个断点，就能从茫茫多的js代码中找到想要的函数</p><figure><img src="https://telegra.ph/file/669348d6987fcb10a61b9.gif"><figcaption></figcaption></figure><p>结果发现在Runner对象内部处理掉键盘事件e</p><h4 id="找下Runner-Object的源码">找下Runner Object的源码</h4><p>js的类以前都是用函数实现，而js的函数有个toString方法看源码</p><figure><img src="https://telegra.ph/file/b454dcfcf5786dbc555e1.png"><figcaption></figcaption></figure><p>Runner函数源码一开始就是「单例模式」实现部分，</p><p>注释上的Singleton就是单例的意思</p><p>所以用Runner.instance_就能获取当前游戏对象</p><p>不过Runner.toString出来的源码有点少，很可能不是完整的</p><p>继续想办法看看页面的js源码在哪，结果发现来自VM...</p><figure><img src="https://telegra.ph/file/35536adbd9473f15db0d4.png"><figcaption></figcaption></figure><p>先阅读下VM前缀是什么意思 VM] file from javascript</p><p>VM前缀的js代码可能在以下地方</p><ul><li>开发者工具的console内</li><li>eval</li><li>script标签内</li></ul><p>排除前两种可能，很快在第四个script标签内找到了游戏源码</p><figure><img src="https://telegra.ph/file/81c09ab28787e65c547a5.png"><figcaption></figcaption></figure><p>从这样优秀的源码中还是能学到不少新东西</p><p>结果源码太长还是看不全，只好另存为html文件用IDE打开看</p><h4 id="游戏作弊">游戏作弊</h4><p>如何让小恐龙"无敌"，碰到敌人也不死掉？</p><p>原来触发gameover后会结束游戏，现在只要把gameover函数改为空</p><p>即便碰到障碍物触发了gameover也会当做无事发生继续游戏</p><figure><img src="https://telegra.ph/file/577a4e2b68fc3005ce7f2.png"><figcaption></figcaption></figure><figure><img src="https://telegra.ph/file/663b2569c2c9a21c8a49a.png"><figcaption></figcaption></figure><figure><img src="https://telegra.ph/file/ced0babfbb2e36438f4d7.gif"><figcaption></figcaption></figure><p>参考文章: <a href="https://mathewsachin.github.io/blog/2016/11/05/chrome-dino-hack.html" target="_blank">chrome-dino-hack</a></p><p><br></p><p><br></p><p> 资料来源: 品葱</p><p><a href="https://www.pin-cong.com/p/127548/" target="_blank">https://www.pin-cong.com/p/127548/</a></p><p><br></p><p><br></p><p><br></p>
    </body>
</html>